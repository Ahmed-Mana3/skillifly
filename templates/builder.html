{% extends 'base.html' %}
{% load static %}

{% block title %}Skillifly – Portfolio Builder{% endblock %}

{% block content %}
<div class="builder-header">
    <h1>Build Your Portfolio</h1>
    <p>Fill in your information to create your portfolio</p>
</div>

<div class="builder-container">
    <form class="builder-form" id="portfolioForm" method="post" action="{% url 'builder' %}">
        {% csrf_token %}
        
        <!-- Personal Information Section -->
        <section class="form-section">
            <h2>Personal Information</h2>
            
            <div class="form-group">
                <label for="fullname">Full Name</label>
                <input type="text" id="fullname" name="fullname" value="{{ portfolio.personal.fullname|default:'' }}" placeholder="John Doe" required>
            </div>

            <div class="form-group">
                <label for="title">Professional Title</label>
                <input type="text" id="title" name="title" value="{{ portfolio.personal.title|default:'' }}" placeholder="Full Stack Developer" required>
            </div>

            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" value="{{ portfolio.personal.email|default:'' }}" placeholder="john@example.com" required>
            </div>

            <div class="form-group">
                <label for="phone">Phone</label>
                <input type="tel" id="phone" name="phone" value="{{ portfolio.personal.phone|default:'' }}" placeholder="+1 (555) 123-4567">
            </div>

            <div class="form-group">
                <label for="bio">Bio</label>
                <textarea id="bio" name="bio" rows="5" placeholder="Tell us about yourself...">{{ portfolio.personal.bio|default:'' }}</textarea>
            </div>
        </section>

        <!-- Skills Section -->
        <section class="form-section">
            <div class="section-header">
                <h2>Skills</h2>
                <button type="button" class="btn-add" id="addSkillBtn">+ Add Skill</button>
            </div>
            
            <div class="skills-list" id="skillsList">
                {% for skill in portfolio.skills %}
                <div class="skill-item">
                    <input type="text" class="skill-input" name="skills[]" value="{{ skill }}" placeholder="e.g., Python, JavaScript, UI Design" required>
                    <button type="button" class="btn-remove">Remove</button>
                </div>
                {% empty %}
                <div class="skill-item">
                    <input type="text" class="skill-input" name="skills[]" placeholder="e.g., Python, JavaScript, UI Design" required>
                    <button type="button" class="btn-remove">Remove</button>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Education Section -->
        <section class="form-section">
            <div class="section-header">
                <h2>Education</h2>
                <button type="button" class="btn-add" id="addEducationBtn">+ Add Education</button>
            </div>
            
            <div class="education-list" id="educationList">
                {% for edu in portfolio.education %}
                <div class="education-item">
                    <div class="form-row">
                        <div class="form-group">
                            <label>School/University</label>
                            <input type="text" name="education_school[]" value="{{ edu.school }}" placeholder="Port Said University" required>
                        </div>
                        <div class="form-group">
                            <label>Degree</label>
                            <input type="text" name="education_degree[]" value="{{ edu.degree }}" placeholder="Bachelor's Degree" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Field of Study</label>
                            <input type="text" name="education_field[]" value="{{ edu.field }}" placeholder="Computer Science" required>
                        </div>
                        <div class="form-group">
                            <label>Graduation Year</label>
                            <input type="number" name="education_year[]" value="{{ edu.year }}" placeholder="2024" required>
                        </div>
                    </div>
                    <button type="button" class="btn-remove">Remove</button>
                </div>
                {% empty %}
                <div class="education-item">
                    <div class="form-row">
                        <div class="form-group">
                            <label>School/University</label>
                            <input type="text" name="education_school[]" placeholder="Port Said University" required>
                        </div>
                        <div class="form-group">
                            <label>Degree</label>
                            <input type="text" name="education_degree[]" placeholder="Bachelor's Degree" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Field of Study</label>
                            <input type="text" name="education_field[]" placeholder="Computer Science" required>
                        </div>
                        <div class="form-group">
                            <label>Graduation Year</label>
                            <input type="number" name="education_year[]" placeholder="2024" required>
                        </div>
                    </div>
                    <button type="button" class="btn-remove">Remove</button>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Experience Section -->
        <section class="form-section">
            <div class="section-header">
                <h2>Experience</h2>
                <button type="button" class="btn-add" id="addExperienceBtn">+ Add Experience</button>
            </div>
            
            <div class="experience-list" id="experienceList">
                {% for exp in portfolio.experience %}
                <div class="experience-item">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Job Title</label>
                            <input type="text" name="experience_title[]" value="{{ exp.title }}" placeholder="Full Stack Developer" required>
                        </div>
                        <div class="form-group">
                            <label>Company</label>
                            <input type="text" name="experience_company[]" value="{{ exp.company }}" placeholder="Tech Company" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Start Date</label>
                            <input type="month" name="experience_start[]" value="{{ exp.start }}" required>
                        </div>
                        <div class="form-group">
                            <label>End Date</label>
                            <input type="month" name="experience_end[]" value="{{ exp.end }}" placeholder="Leave blank if current">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea name="experience_description[]" rows="3" placeholder="Describe your role and achievements...">{{ exp.description }}</textarea>
                    </div>
                    <button type="button" class="btn-remove">Remove</button>
                </div>
                {% empty %}
                <div class="experience-item">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Job Title</label>
                            <input type="text" name="experience_title[]" placeholder="Full Stack Developer" required>
                        </div>
                        <div class="form-group">
                            <label>Company</label>
                            <input type="text" name="experience_company[]" placeholder="Tech Company" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Start Date</label>
                            <input type="month" name="experience_start[]" required>
                        </div>
                        <div class="form-group">
                            <label>End Date</label>
                            <input type="month" name="experience_end[]" placeholder="Leave blank if current">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea name="experience_description[]" rows="3" placeholder="Describe your role and achievements..."></textarea>
                    </div>
                    <button type="button" class="btn-remove">Remove</button>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Projects Section -->
        <section class="form-section">
            <div class="section-header">
                <h2>Projects</h2>
                <button type="button" class="btn-add" id="addProjectBtn">+ Add Project</button>
            </div>
            
            <div class="projects-list" id="projectsList">
                {% for project in portfolio.projects %}
                <div class="project-item">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Project Name</label>
                            <input type="text" name="project_name[]" value="{{ project.name }}" placeholder="e.g., Portfolio Builder" required>
                        </div>
                        <div class="form-group">
                            <label>Project URL (optional)</label>
                            <input type="url" name="project_url[]" value="{{ project.url }}" placeholder="https://example.com">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea name="project_description[]" rows="3" placeholder="What did you build? What impact did it have?">{{ project.description }}</textarea>
                    </div>
                    <button type="button" class="btn-remove">Remove</button>
                </div>
                {% empty %}
                <div class="project-item">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Project Name</label>
                            <input type="text" name="project_name[]" placeholder="e.g., Portfolio Builder" required>
                        </div>
                        <div class="form-group">
                            <label>Project URL (optional)</label>
                            <input type="url" name="project_url[]" placeholder="https://example.com">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea name="project_description[]" rows="3" placeholder="What did you build? What impact did it have?"></textarea>
                    </div>
                    <button type="button" class="btn-remove">Remove</button>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Communication Links Section -->
        <section class="form-section">
            <div class="section-header">
                <h2>Communication & Links</h2>
                <button type="button" class="btn-add" id="addLinkBtn">+ Add Link</button>
            </div>
            
            <div class="links-list" id="linksList">
                {% for link in portfolio.links %}
                <div class="link-item">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Link Name</label>
                            <input type="text" name="link_name[]" value="{{ link.name }}" placeholder="e.g., GitHub, LinkedIn, Portfolio" required>
                        </div>
                        <div class="form-group">
                            <label>URL</label>
                            <input type="url" name="link_url[]" value="{{ link.url }}" placeholder="https://example.com" required>
                        </div>
                    </div>
                    <button type="button" class="btn-remove">Remove</button>
                </div>
                {% empty %}
                <div class="link-item">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Link Name</label>
                            <input type="text" name="link_name[]" placeholder="e.g., GitHub, LinkedIn, Portfolio" required>
                        </div>
                        <div class="form-group">
                            <label>URL</label>
                            <input type="url" name="link_url[]" placeholder="https://example.com" required>
                        </div>
                    </div>
                    <button type="button" class="btn-remove">Remove</button>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Action Buttons -->
        <div class="form-actions">
            <button type="submit" class="btn-preview">Preview & Publish →</button>
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'builder.js' %}"></script>
{% endblock %}
