{% extends 'base.html' %}
{% load static %}

{% block title %}Skillifly – Portfolio Builder{% endblock %}

{% block content %}
<div class="builder-header">
    <h1>Build Your Portfolio</h1>
    <p>Fill in your information to create your portfolio</p>
</div>

<div class="builder-container">
    <form class="builder-form" id="portfolioForm" method="post" action="{% url 'builder' %}">
        {% csrf_token %}

        <!-- ========================= -->
        <!-- Personal Information -->
        <!-- ========================= -->
        <section class="form-section">
            <h2>Personal Information</h2>

            <div class="form-group">
                <label for="fullname">Full Name</label>
                {{ personal_form.fullname }}
                {% if personal_form.fullname.errors %}
                    <div class="field-errors">{{ personal_form.fullname.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="title">Professional Title</label>
                {{ personal_form.title }}
                {% if personal_form.title.errors %}
                    <div class="field-errors">{{ personal_form.title.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="email">Email</label>
                {{ personal_form.email }}
                {% if personal_form.email.errors %}
                    <div class="field-errors">{{ personal_form.email.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="phone">Phone</label>
                {{ personal_form.phone }}
                {% if personal_form.phone.errors %}
                    <div class="field-errors">{{ personal_form.phone.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="bio">Bio</label>
                {{ personal_form.bio }}
                {% if personal_form.bio.errors %}
                    <div class="field-errors">{{ personal_form.bio.errors }}</div>
                {% endif %}
            </div>
        </section>


        <!-- ========================= -->
        <!-- Skills -->
        <!-- ========================= -->
        <section class="form-section">
            <div class="section-header">
                <h2>Skills</h2>
                <button type="button" class="btn-add" id="addSkillBtn">+ Add Skill</button>
            </div>

            <div class="skills-list" id="skillsList">
                {{ skill_formset.management_form }}

                {% for form in skill_formset %}
                <div class="skill-item">
                    {{ form.skill }}
                    {{ form.DELETE }}
                    <button type="button" class="btn-remove">Remove</button>

                    {% if form.skill.errors %}
                        <div class="field-errors">{{ form.skill.errors }}</div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </section>


        <!-- ========================= -->
        <!-- Education -->
        <!-- ========================= -->
        <section class="form-section">
            <div class="section-header">
                <h2>Education</h2>
                <button type="button" class="btn-add" id="addEducationBtn">+ Add Education</button>
            </div>

            <div class="education-list" id="educationList">
                {{ education_formset.management_form }}

                {% for form in education_formset %}
                <div class="education-item">
                    <div class="form-row">
                        <div class="form-group">
                            <label>School/University</label>
                            {{ form.school }}
                            {% if form.school.errors %}
                                <div class="field-errors">{{ form.school.errors }}</div>
                            {% endif %}
                        </div>

                        <div class="form-group">
                            <label>Degree</label>
                            {{ form.degree }}
                            {% if form.degree.errors %}
                                <div class="field-errors">{{ form.degree.errors }}</div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Field of Study</label>
                            {{ form.field }}
                            {% if form.field.errors %}
                                <div class="field-errors">{{ form.field.errors }}</div>
                            {% endif %}
                        </div>

                        <div class="form-group">
                            <label>Graduation Year</label>
                            {{ form.year }}
                            {% if form.year.errors %}
                                <div class="field-errors">{{ form.year.errors }}</div>
                            {% endif %}
                        </div>
                    </div>

                    {{ form.DELETE }}
                    <button type="button" class="btn-remove">Remove</button>
                </div>
                {% endfor %}
            </div>
        </section>


        <!-- ========================= -->
        <!-- Experience -->
        <!-- ========================= -->
        <section class="form-section">
            <div class="section-header">
                <h2>Experience</h2>
                <button type="button" class="btn-add" id="addExperienceBtn">+ Add Experience</button>
            </div>

            <div class="experience-list" id="experienceList">
                {{ experience_formset.management_form }}

                {% for form in experience_formset %}
                <div class="experience-item">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Job Title</label>
                            {{ form.title }}
                            {% if form.title.errors %}
                                <div class="field-errors">{{ form.title.errors }}</div>
                            {% endif %}
                        </div>

                        <div class="form-group">
                            <label>Company</label>
                            {{ form.company }}
                            {% if form.company.errors %}
                                <div class="field-errors">{{ form.company.errors }}</div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Start Date</label>
                            {{ form.start }}
                            {% if form.start.errors %}
                                <div class="field-errors">{{ form.start.errors }}</div>
                            {% endif %}
                        </div>

                        <div class="form-group">
                            <label>End Date</label>
                            {{ form.end }}
                            {% if form.end.errors %}
                                <div class="field-errors">{{ form.end.errors }}</div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Description</label>
                        {{ form.description }}
                        {% if form.description.errors %}
                            <div class="field-errors">{{ form.description.errors }}</div>
                        {% endif %}
                    </div>

                    {{ form.DELETE }}
                    <button type="button" class="btn-remove">Remove</button>
                </div>
                {% endfor %}
            </div>
        </section>


        <!-- ========================= -->
        <!-- Projects -->
        <!-- ========================= -->
        <section class="form-section">
            <div class="section-header">
                <h2>Projects</h2>
                <button type="button" class="btn-add" id="addProjectBtn">+ Add Project</button>
            </div>

            <div class="projects-list" id="projectsList">
                {{ project_formset.management_form }}

                {% for form in project_formset %}
                <div class="project-item">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Project Name</label>
                            {{ form.name }}
                            {% if form.name.errors %}
                                <div class="field-errors">{{ form.name.errors }}</div>
                            {% endif %}
                        </div>

                        <div class="form-group">
                            <label>Project URL (optional)</label>
                            {{ form.url }}
                            {% if form.url.errors %}
                                <div class="field-errors">{{ form.url.errors }}</div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Description</label>
                        {{ form.description }}
                        {% if form.description.errors %}
                            <div class="field-errors">{{ form.description.errors }}</div>
                        {% endif %}
                    </div>

                    {{ form.DELETE }}
                    <button type="button" class="btn-remove">Remove</button>
                </div>
                {% endfor %}
            </div>
        </section>


        <!-- ========================= -->
        <!-- Communication & Links -->
        <!-- ========================= -->
        <section class="form-section">
            <div class="section-header">
                <h2>Communication & Links</h2>
                <button type="button" class="btn-add" id="addLinkBtn">+ Add Link</button>
            </div>

            <div class="links-list" id="linksList">
                {{ link_formset.management_form }}

                {% for form in link_formset %}
                <div class="link-item">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Link Name</label>
                            {{ form.name }}
                            {% if form.name.errors %}
                                <div class="field-errors">{{ form.name.errors }}</div>
                            {% endif %}
                        </div>

                        <div class="form-group">
                            <label>URL</label>
                            {{ form.url }}
                            {% if form.url.errors %}
                                <div class="field-errors">{{ form.url.errors }}</div>
                            {% endif %}
                        </div>
                    </div>

                    {{ form.DELETE }}
                    <button type="button" class="btn-remove">Remove</button>
                </div>
                {% endfor %}
            </div>
        </section>


        <!-- ========================= -->
        <!-- Action Buttons -->
        <!-- ========================= -->
        <div class="form-actions">
            <button type="submit" class="btn-preview">Preview & Publish →</button>
        </div>

    </form>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'builder.js' %}"></script>
{% endblock %}
